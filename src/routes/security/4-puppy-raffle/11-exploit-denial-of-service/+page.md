---
title: Exploit - Denial of Service (DoS)
---

_Follow along with this video:_

## <iframe width="560" height="315" src="VIDEO_LINK" title="vimeo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

---

# Understanding Denial of Service Attacks in Smart Contracts

In this blog post, we will be discussing an important cybersecurity issue in the world of blockchain - the Denial of Service (DoS) attack. More specifically, we'll learn how this attack relates to and affects smart contracts.

## What is a Denial of Service Attack?

Denial of Service attacks target computer networks and systems, often overloading them with unnecessary requests to cause a disruption in the service provided. In the context of smart contracts built on blockchain networks, a Denial of Service attack can significantly impede its functionality by making it gas-intensive and, therefore, expensive to use.

## The Attack Strategy: A Basic Overview

Let's understand this with concept with a minimalist Ethereum smart contract that we'll call `Dos`.

Here is an outline of how this contract functions:

1. We have an `address[]` array named `entrance` that stores the addresses that interact with the contract.
2. There is a function named `enter` that allows an address to enter into the `entrance` array.

   ```javascript
   function enter() public {...}
   ```

3. Inside this function, the contract checks the `entrance` array for duplicates of the address attempting to enter. If no duplicate is found, the address is then pushed into the `entrance` array.

The more addresses are added into the array, more looping will be required for the duplication check, increasing the gas costs exponentially.

## Avalanche Effect and DoS

To understand how this causes DoS, let's consider a case where the `entrance` array is currently empty. In this scenario, the `enter` function doesn't have to make a single loop, and the incoming address is pushed into the array without any hassle.

However, the situation drastically changes when multiple addresses (let's say 10) are already in the array. Now, the `enter` function will loop through these 10 addresses before adding any new ones. Now let's say there are 100 addresses. The loop now has to go through all these addresses, and the resulting gas costs shoot up drastically.

This is the avalanche effect, and it is this accumulation of gas costs that makes a smart contract susceptible to a DoS attack. A malicious actor can blast the `enter` function with loads of calls, inserting numerous addresses onto the `entrance` array. This would render the contract unusable due to the incredibly high gas fees required to interact with it.

![](https://cdn.videotap.com/3iSoxXBYl3uLnVWzprD8-208.76.png)## Seeing the Attack in Action

Let's simulate this DoS exploit.

We compile and deploy our `Dos` contract. We then use a test account to call the `enter` function. For every call, we examine the gas fees involved:

- The first call to the `enter` function consumes relatively minimal gas.
- As we make additional calls with more test accounts, we see the gas consumption increasing.

By running the `enter` function enough times and overloading the `entrance` array, the exploit becomes clearer. The contract becomes so costly to interact with that you would need to spend an exorbitant amount of Ether, making the contract essentially unusable. This is the essence of a smart contract DoS attack.

## Testing the Attack and Mitigation

A good way to educate yourself further on DoS attacks is by creating test scenarios, simulating the attack, and experimenting with potential solutions.

```javascript
function testDosAttack() public {
    Dos dos = new Dos();
    address dummyAddress = address(1);

    for(uint256 i=0; i<1000; i++){
        dummyAddress = address(uint(dummyAddress) + 1);
        dos.enter(dummyAddress);
        }
        uint gasCost = dos.enter(dummyAddress).gas;
        assert.greaterThan(gasCost, expectedGasCost, "DoS attack simulation failed");
        }
```

This simple test creates a new instance of the `Dos` contract, and then inserts 1000 addresses into the `entrance` array by calling `enter(address)`. It then calculates the gas cost for the 1001st transaction and asserts if this cost is higher than an expected standard cost.

This way, you can observe how drastically the gas costs have increased due to the DoS attack.

## Final Thoughts

Denial-of-service attacks are a persistent security concern for smart contracts. As active participants or enthusiasts in the blockchain and smart contract community, understanding these vulnerabilities and exploring potential solutions is vital.

> “Knowledge is power. Information is liberating. Education is the premise of progress, in every society, in every family.” - Kofi Annan

Feel free to clone the SC exploits repository and run the `Dos` contract and attack simulations yourself.

In the end, make your contracts robust, keeping possible attack vectors in mind, ensure you’ve done thorough testing before deploying, and most importantly, stay informed!
